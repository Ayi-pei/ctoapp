"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/layout",{

/***/ "(app-pages-browser)/./src/app/globals.css":
/*!*****************************!*\
  !*** ./src/app/globals.css ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"3ba9814b6c8e\");\nif (true) { module.hot.accept() }\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvZ2xvYmFscy5jc3MiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGlFQUFlLGNBQWM7QUFDN0IsSUFBSSxJQUFVLElBQUksaUJBQWlCIiwic291cmNlcyI6WyJEOlxceGlhbmdtdVxcRWRnZS1GdW5jdGlvblxcY3RvYXBwXFxzcmNcXGFwcFxcZ2xvYmFscy5jc3MiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCIzYmE5ODE0YjZjOGVcIlxuaWYgKG1vZHVsZS5ob3QpIHsgbW9kdWxlLmhvdC5hY2NlcHQoKSB9XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/globals.css\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/context/balance-context.tsx":
/*!*****************************************!*\
  !*** ./src/context/balance-context.tsx ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BalanceProvider: () => (/* binding */ BalanceProvider),\n/* harmony export */   useBalance: () => (/* binding */ useBalance)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _auth_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./auth-context */ \"(app-pages-browser)/./src/context/auth-context.tsx\");\n/* harmony import */ var _enhanced_market_data_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./enhanced-market-data-context */ \"(app-pages-browser)/./src/context/enhanced-market-data-context.tsx\");\n/* harmony import */ var _hooks_use_toast__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/hooks/use-toast */ \"(app-pages-browser)/./src/hooks/use-toast.ts\");\n/* harmony import */ var _logs_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./logs-context */ \"(app-pages-browser)/./src/context/logs-context.tsx\");\n/* harmony import */ var _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/supabaseClient */ \"(app-pages-browser)/./src/lib/supabaseClient.ts\");\n/* __next_internal_client_entry_do_not_use__ BalanceProvider,useBalance auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\n\n\n\nconst BalanceContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\nfunction BalanceProvider(param) {\n    let { children } = param;\n    _s();\n    const { user, updateUser } = (0,_auth_context__WEBPACK_IMPORTED_MODULE_2__.useAuth)();\n    const { getLatestPrice } = (0,_enhanced_market_data_context__WEBPACK_IMPORTED_MODULE_3__.useEnhancedMarketData)();\n    const { toast } = (0,_hooks_use_toast__WEBPACK_IMPORTED_MODULE_4__.useToast)();\n    const { addLog } = (0,_logs_context__WEBPACK_IMPORTED_MODULE_5__.useLogs)();\n    const [balances, setBalances] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [investments, setInvestments] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [rewardLogs, setRewardLogs] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [activeContractTrades, setActiveContractTrades] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [historicalTrades, setHistoricalTrades] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [lastCheckInDate, setLastCheckInDate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)();\n    const [consecutiveCheckIns, setConsecutiveCheckIns] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const fetchUserBalanceData = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"BalanceProvider.useCallback[fetchUserBalanceData]\": async (userId)=>{\n            if (!_lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.isSupabaseEnabled) return;\n            const { data, error } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.from('balances').select('*').eq('user_id', userId);\n            if (error) console.error(\"Error fetching balances:\", error);\n            else {\n                const formattedBalances = {};\n                data === null || data === void 0 ? void 0 : data.forEach({\n                    \"BalanceProvider.useCallback[fetchUserBalanceData]\": (b)=>{\n                        formattedBalances[b.asset] = {\n                            available: b.available_balance,\n                            frozen: b.frozen_balance\n                        };\n                    }\n                }[\"BalanceProvider.useCallback[fetchUserBalanceData]\"]);\n                setBalances(formattedBalances);\n            }\n        }\n    }[\"BalanceProvider.useCallback[fetchUserBalanceData]\"], []);\n    const fetchUserTradeData = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"BalanceProvider.useCallback[fetchUserTradeData]\": async (userId)=>{\n            if (!_lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.isSupabaseEnabled) return;\n            const { data, error } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.from('trades').select('*').eq('user_id', userId).order('created_at', {\n                ascending: false\n            });\n            if (error) console.error(\"Error fetching trades:\", error);\n            else {\n                setActiveContractTrades(data.filter({\n                    \"BalanceProvider.useCallback[fetchUserTradeData]\": (t)=>t.orderType === 'contract' && t.status === 'active'\n                }[\"BalanceProvider.useCallback[fetchUserTradeData]\"]));\n                setHistoricalTrades(data.filter({\n                    \"BalanceProvider.useCallback[fetchUserTradeData]\": (t)=>t.status !== 'active'\n                }[\"BalanceProvider.useCallback[fetchUserTradeData]\"]));\n            }\n        }\n    }[\"BalanceProvider.useCallback[fetchUserTradeData]\"], []);\n    const fetchUserInvestmentData = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"BalanceProvider.useCallback[fetchUserInvestmentData]\": async (userId)=>{\n            if (!_lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.isSupabaseEnabled) return;\n            const { data, error } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.from('investments').select('*').eq('user_id', userId).order('created_at', {\n                ascending: false\n            });\n            if (error) console.error(\"Error fetching investments:\", error);\n            else setInvestments(data);\n        }\n    }[\"BalanceProvider.useCallback[fetchUserInvestmentData]\"], []);\n    const fetchUserRewardLogs = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"BalanceProvider.useCallback[fetchUserRewardLogs]\": async (userId)=>{\n            if (!_lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.isSupabaseEnabled) return;\n            const { data, error } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.from('reward_logs').select('*').eq('user_id', userId).order('created_at', {\n                ascending: false\n            });\n            if (error) console.error(\"Error fetching reward logs:\", error);\n            else setRewardLogs(data);\n        }\n    }[\"BalanceProvider.useCallback[fetchUserRewardLogs]\"], []);\n    const fetchUserProfileForCheckin = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"BalanceProvider.useCallback[fetchUserProfileForCheckin]\": async (userId)=>{\n            if (!_lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.isSupabaseEnabled) return;\n            const { data, error } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.from('profiles').select('last_check_in_date, consecutive_check_ins').eq('id', userId).single();\n            if (error) {\n                console.error(\"Error fetching user profile for check-in:\", error);\n            } else if (data) {\n                setLastCheckInDate(data.last_check_in_date);\n                setConsecutiveCheckIns(data.consecutive_check_ins || 0);\n            }\n        }\n    }[\"BalanceProvider.useCallback[fetchUserProfileForCheckin]\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"BalanceProvider.useEffect\": ()=>{\n            const loadAllData = {\n                \"BalanceProvider.useEffect.loadAllData\": async ()=>{\n                    setIsLoading(true);\n                    if ((user === null || user === void 0 ? void 0 : user.id) && _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.isSupabaseEnabled) {\n                        await Promise.all([\n                            fetchUserBalanceData(user.id),\n                            fetchUserTradeData(user.id),\n                            fetchUserInvestmentData(user.id),\n                            fetchUserRewardLogs(user.id),\n                            fetchUserProfileForCheckin(user.id)\n                        ]);\n                    } else {\n                        // Clear data on logout\n                        setBalances({});\n                        setInvestments([]);\n                        setRewardLogs([]);\n                        setActiveContractTrades([]);\n                        setHistoricalTrades([]);\n                        setLastCheckInDate(undefined);\n                        setConsecutiveCheckIns(0);\n                    }\n                    setIsLoading(false);\n                }\n            }[\"BalanceProvider.useEffect.loadAllData\"];\n            loadAllData();\n        }\n    }[\"BalanceProvider.useEffect\"], [\n        user,\n        _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.isSupabaseEnabled,\n        fetchUserBalanceData,\n        fetchUserTradeData,\n        fetchUserInvestmentData,\n        fetchUserRewardLogs,\n        fetchUserProfileForCheckin\n    ]);\n    // Realtime Subscriptions\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"BalanceProvider.useEffect\": ()=>{\n            if (!user || !_lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.isSupabaseEnabled) return;\n            const handleDataChange = {\n                \"BalanceProvider.useEffect.handleDataChange\": ()=>{\n                    if (!user) return;\n                    fetchUserTradeData(user.id);\n                    fetchUserInvestmentData(user.id);\n                    fetchUserBalanceData(user.id);\n                    fetchUserProfileForCheckin(user.id);\n                }\n            }[\"BalanceProvider.useEffect.handleDataChange\"];\n            const tradesChannel = _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.channel(\"trades-channel-\".concat(user.id)).on('postgres_changes', {\n                event: '*',\n                schema: 'public',\n                table: 'trades',\n                filter: \"user_id=eq.\".concat(user.id)\n            }, handleDataChange).subscribe();\n            const investmentsChannel = _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.channel(\"investments-channel-\".concat(user.id)).on('postgres_changes', {\n                event: '*',\n                schema: 'public',\n                table: 'investments',\n                filter: \"user_id=eq.\".concat(user.id)\n            }, handleDataChange).subscribe();\n            const balancesChannel = _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.channel(\"balances-channel-\".concat(user.id)).on('postgres_changes', {\n                event: '*',\n                schema: 'public',\n                table: 'balances',\n                filter: \"user_id=eq.\".concat(user.id)\n            }, handleDataChange).subscribe();\n            const profileChannel = _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.channel(\"profile-channel-\".concat(user.id)).on('postgres_changes', {\n                event: 'UPDATE',\n                schema: 'public',\n                table: 'profiles',\n                filter: \"id=eq.\".concat(user.id)\n            }, handleDataChange).subscribe();\n            return ({\n                \"BalanceProvider.useEffect\": ()=>{\n                    _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.removeChannel(tradesChannel);\n                    _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.removeChannel(investmentsChannel);\n                    _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.removeChannel(balancesChannel);\n                    _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.removeChannel(profileChannel);\n                }\n            })[\"BalanceProvider.useEffect\"];\n        }\n    }[\"BalanceProvider.useEffect\"], [\n        user,\n        _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.isSupabaseEnabled,\n        fetchUserTradeData,\n        fetchUserInvestmentData,\n        fetchUserBalanceData,\n        fetchUserProfileForCheckin\n    ]);\n    const adjustBalance = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"BalanceProvider.useCallback[adjustBalance]\": async function(userId, asset, amount) {\n            let isFrozen = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : false, isDebitFrozen = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : false;\n            if (!_lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.isSupabaseEnabled) return;\n            const { error } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.rpc('adjust_balance', {\n                p_user_id: userId,\n                p_asset: asset,\n                p_amount: amount,\n                p_is_frozen: isFrozen,\n                p_is_debit_frozen: isDebitFrozen\n            });\n            if (error) {\n                console.error(\"Error adjusting balance:\", error);\n                if ((user === null || user === void 0 ? void 0 : user.id) === userId) {\n                    toast({\n                        variant: 'destructive',\n                        title: 'Balance Update Failed',\n                        description: error.message\n                    });\n                }\n            } else {\n                if ((user === null || user === void 0 ? void 0 : user.id) === userId) {\n                    fetchUserBalanceData(userId);\n                }\n            }\n        }\n    }[\"BalanceProvider.useCallback[adjustBalance]\"], [\n        toast,\n        user === null || user === void 0 ? void 0 : user.id,\n        fetchUserBalanceData\n    ]);\n    const creditReward = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"BalanceProvider.useCallback[creditReward]\": async (params)=>{\n            if (!_lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.isSupabaseEnabled) return;\n            const { error } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.rpc('credit_reward', {\n                p_user_id: params.userId,\n                p_amount: params.amount,\n                p_asset: params.asset,\n                p_reward_type: params.type,\n                p_source_id: params.sourceId,\n                p_description: params.description\n            });\n            if (error) {\n                console.error(\"Error crediting reward:\", error);\n            }\n        }\n    }[\"BalanceProvider.useCallback[creditReward]\"], []);\n    const placeContractTrade = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"BalanceProvider.useCallback[placeContractTrade]\": async (trade, tradingPair)=>{\n            var _balances_quoteAsset;\n            if (!user || !_lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.isSupabaseEnabled) return;\n            if (user.is_frozen) {\n                toast({\n                    variant: 'destructive',\n                    title: 'Action Failed',\n                    description: 'Your account is frozen.'\n                });\n                return;\n            }\n            const quoteAsset = tradingPair.split('/')[1];\n            const currentPrice = getLatestPrice(tradingPair);\n            if ((((_balances_quoteAsset = balances[quoteAsset]) === null || _balances_quoteAsset === void 0 ? void 0 : _balances_quoteAsset.available) || 0) < trade.amount) {\n                toast({\n                    variant: 'destructive',\n                    title: '下单失败',\n                    description: \"可用 \".concat(quoteAsset, \" 余额不足。\")\n                });\n                return;\n            }\n            const newTrade = {\n                user_id: user.id,\n                trading_pair: tradingPair,\n                type: trade.type,\n                amount: trade.amount,\n                entry_price: currentPrice,\n                settlement_time: new Date(Date.now() + trade.period * 1000).toISOString(),\n                period: trade.period,\n                profit_rate: trade.profit_rate,\n                status: 'active',\n                orderType: 'contract'\n            };\n            const { data: insertedTrade, error } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.from('trades').insert(newTrade).select().single();\n            if (error || !insertedTrade) {\n                console.error(\"Failed to place contract trade:\", error);\n                toast({\n                    variant: 'destructive',\n                    title: '下单失败',\n                    description: '无法保存交易记录，请重试。'\n                });\n                return;\n            }\n            toast({\n                title: '下单成功',\n                description: '您的合约订单已成功建立。'\n            });\n        }\n    }[\"BalanceProvider.useCallback[placeContractTrade]\"], [\n        user,\n        balances,\n        getLatestPrice,\n        toast\n    ]);\n    const placeSpotTrade = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"BalanceProvider.useCallback[placeSpotTrade]\": async (trade)=>{\n            var _balances_quoteAsset, _balances_baseAsset;\n            if (!user || !_lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.isSupabaseEnabled) return;\n            if (user.is_frozen) {\n                toast({\n                    variant: 'destructive',\n                    title: 'Action Failed',\n                    description: 'Your account is frozen.'\n                });\n                return;\n            }\n            const [baseAsset, quoteAsset] = trade.trading_pair.split('/');\n            if (trade.type === 'buy' && (((_balances_quoteAsset = balances[quoteAsset]) === null || _balances_quoteAsset === void 0 ? void 0 : _balances_quoteAsset.available) || 0) < trade.total) {\n                toast({\n                    variant: 'destructive',\n                    title: '下单失败',\n                    description: \"可用 \".concat(quoteAsset, \" 余额不足。\")\n                });\n                return;\n            }\n            if (trade.type === 'sell' && (((_balances_baseAsset = balances[baseAsset]) === null || _balances_baseAsset === void 0 ? void 0 : _balances_baseAsset.available) || 0) < trade.amount) {\n                toast({\n                    variant: 'destructive',\n                    title: '下单失败',\n                    description: \"可用 \".concat(baseAsset, \" 余额不足。\")\n                });\n                return;\n            }\n            const currentPrice = getLatestPrice(trade.trading_pair);\n            const newTrade = {\n                type: trade.type,\n                amount: trade.amount,\n                total: trade.total,\n                price: currentPrice,\n                user_id: user.id,\n                trading_pair: trade.trading_pair,\n                base_asset: baseAsset,\n                quote_asset: quoteAsset,\n                status: 'filled',\n                orderType: 'spot'\n            };\n            const { data: insertedTrade, error } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.from('trades').insert(newTrade).select().single();\n            if (error || !insertedTrade) {\n                console.error(\"Failed to place spot trade:\", error);\n                toast({\n                    variant: 'destructive',\n                    title: '下单失败',\n                    description: '无法保存交易记录，请联系客服。'\n                });\n                return;\n            }\n            toast({\n                title: '交易成功',\n                description: '您的币币交易已完成。'\n            });\n        }\n    }[\"BalanceProvider.useCallback[placeSpotTrade]\"], [\n        user,\n        balances,\n        getLatestPrice,\n        toast\n    ]);\n    const addDailyInvestment = async (params)=>{\n        if (!user || !_lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.isSupabaseEnabled) return false;\n        const { error } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.rpc('create_daily_investment', {\n            p_user_id: user.id,\n            p_product_name: params.productName,\n            p_amount: params.amount,\n            p_daily_rate: params.dailyRate,\n            p_period: params.period,\n            p_category: 'staking',\n            p_staking_asset: params.stakingAsset,\n            p_staking_amount: params.stakingAmount\n        });\n        if (error) {\n            console.error(\"Failed to add daily investment:\", error);\n            toast({\n                variant: 'destructive',\n                title: '购买失败',\n                description: error.message\n            });\n            return false;\n        }\n        return true;\n    };\n    const addHourlyInvestment = async (params)=>{\n        if (!user || !_lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.isSupabaseEnabled) return false;\n        const selectedTier = params.tiers.find((t)=>t.hours === params.durationHours);\n        if (!selectedTier) return false;\n        const { error } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.rpc('create_hourly_investment', {\n            p_user_id: user.id,\n            p_product_name: params.productName,\n            p_amount: params.amount,\n            p_duration_hours: params.durationHours,\n            p_hourly_rate: selectedTier.rate\n        });\n        if (error) {\n            console.error(\"Failed to add hourly investment:\", error);\n            toast({\n                variant: 'destructive',\n                title: '购买失败',\n                description: error.message\n            });\n            return false;\n        }\n        return true;\n    };\n    const handleCheckIn = async ()=>{\n        if (!user || !_lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.isSupabaseEnabled) {\n            return {\n                success: false,\n                reward: 0,\n                message: \"User not logged in.\"\n            };\n        }\n        const { data, error } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_6__.supabase.rpc('handle_user_check_in', {\n            p_user_id: user.id\n        });\n        if (error) {\n            return {\n                success: false,\n                reward: 0,\n                message: error.message\n            };\n        }\n        return {\n            success: data.success,\n            reward: data.reward_amount,\n            message: data.message\n        };\n    };\n    const value = {\n        balances,\n        placeContractTrade,\n        placeSpotTrade,\n        isLoading,\n        investments,\n        rewardLogs,\n        addDailyInvestment,\n        addHourlyInvestment,\n        activeContractTrades,\n        historicalTrades,\n        handleCheckIn,\n        lastCheckInDate,\n        consecutiveCheckIns,\n        creditReward,\n        adjustBalance\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(BalanceContext.Provider, {\n        value: value,\n        children: children\n    }, void 0, false, {\n        fileName: \"D:\\\\xiangmu\\\\Edge-Function\\\\ctoapp\\\\src\\\\context\\\\balance-context.tsx\",\n        lineNumber: 381,\n        columnNumber: 9\n    }, this);\n}\n_s(BalanceProvider, \"hoNqBYuxqX+2Ni0lfrmGKQcHg0I=\", false, function() {\n    return [\n        _auth_context__WEBPACK_IMPORTED_MODULE_2__.useAuth,\n        _enhanced_market_data_context__WEBPACK_IMPORTED_MODULE_3__.useEnhancedMarketData,\n        _hooks_use_toast__WEBPACK_IMPORTED_MODULE_4__.useToast,\n        _logs_context__WEBPACK_IMPORTED_MODULE_5__.useLogs\n    ];\n});\n_c = BalanceProvider;\nfunction useBalance() {\n    _s1();\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(BalanceContext);\n    if (context === undefined) {\n        throw new Error('useBalance must be used within an BalanceProvider');\n    }\n    return context;\n}\n_s1(useBalance, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"BalanceProvider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb250ZXh0L2JhbGFuY2UtY29udGV4dC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBRXNHO0FBRTdEO0FBQzhCO0FBQzFCO0FBQ0o7QUFDMEI7QUFzQ25FLE1BQU1ZLCtCQUFpQlgsb0RBQWFBLENBQWlDWTtBQUU5RCxTQUFTQyxnQkFBZ0IsS0FBcUM7UUFBckMsRUFBRUMsUUFBUSxFQUEyQixHQUFyQzs7SUFDOUIsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLFVBQVUsRUFBRSxHQUFHWCxzREFBT0E7SUFDcEMsTUFBTSxFQUFFWSxjQUFjLEVBQUUsR0FBR1gsb0ZBQXFCQTtJQUNoRCxNQUFNLEVBQUVZLEtBQUssRUFBRSxHQUFHWCwwREFBUUE7SUFDMUIsTUFBTSxFQUFFWSxNQUFNLEVBQUUsR0FBR1gsc0RBQU9BO0lBRTFCLE1BQU0sQ0FBQ1ksVUFBVUMsWUFBWSxHQUFHbkIsK0NBQVFBLENBQTJELENBQUM7SUFDcEcsTUFBTSxDQUFDb0IsYUFBYUMsZUFBZSxHQUFHckIsK0NBQVFBLENBQWUsRUFBRTtJQUMvRCxNQUFNLENBQUNzQixZQUFZQyxjQUFjLEdBQUd2QiwrQ0FBUUEsQ0FBYyxFQUFFO0lBQzVELE1BQU0sQ0FBQ3dCLHNCQUFzQkMsd0JBQXdCLEdBQUd6QiwrQ0FBUUEsQ0FBa0IsRUFBRTtJQUNwRixNQUFNLENBQUMwQixrQkFBa0JDLG9CQUFvQixHQUFHM0IsK0NBQVFBLENBQWdDLEVBQUU7SUFDMUYsTUFBTSxDQUFDNEIsV0FBV0MsYUFBYSxHQUFHN0IsK0NBQVFBLENBQUM7SUFFM0MsTUFBTSxDQUFDOEIsaUJBQWlCQyxtQkFBbUIsR0FBRy9CLCtDQUFRQTtJQUN0RCxNQUFNLENBQUNnQyxxQkFBcUJDLHVCQUF1QixHQUFHakMsK0NBQVFBLENBQUM7SUFFL0QsTUFBTWtDLHVCQUF1QmhDLGtEQUFXQTs2REFBQyxPQUFPaUM7WUFDNUMsSUFBSSxDQUFDM0Isa0VBQWlCQSxFQUFFO1lBQ3hC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QUksRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTTlCLHlEQUFRQSxDQUFDNEUsR0FBRyxDQUFDLHdCQUF3QjtZQUFFQyxXQUFXdkUsS0FBS21ELEVBQUU7UUFBQztRQUV4RixJQUFJM0IsT0FBTztZQUNQLE9BQU87Z0JBQUU2RyxTQUFTO2dCQUFPQyxRQUFRO2dCQUFHdkQsU0FBU3ZELE1BQU11RCxPQUFPO1lBQUM7UUFDL0Q7UUFFQSxPQUFPO1lBQUVzRCxTQUFTOUcsS0FBSzhHLE9BQU87WUFBRUMsUUFBUS9HLEtBQUtnSCxhQUFhO1lBQUV4RCxTQUFTeEQsS0FBS3dELE9BQU87UUFBQztJQUN0RjtJQUVBLE1BQU15RCxRQUE0QjtRQUM5Qm5JO1FBQ0FrRjtRQUNBbUI7UUFDQTNGO1FBQ0FSO1FBQ0FFO1FBQ0F1RztRQUNBVztRQUNBaEg7UUFDQUU7UUFDQXVIO1FBQ0FuSDtRQUNBRTtRQUNBNkQ7UUFDQWQ7SUFDRjtJQUVBLHFCQUNJLDhEQUFDdEUsZUFBZTZJLFFBQVE7UUFBQ0QsT0FBT0E7a0JBQzNCekk7Ozs7OztBQUdiO0dBaFZnQkQ7O1FBQ2VSLGtEQUFPQTtRQUNUQyxnRkFBcUJBO1FBQzlCQyxzREFBUUE7UUFDUEMsa0RBQU9BOzs7S0FKWks7QUFrVlQsU0FBUzRJOztJQUNkLE1BQU1DLFVBQVV6SixpREFBVUEsQ0FBQ1U7SUFDM0IsSUFBSStJLFlBQVk5SSxXQUFXO1FBQ3pCLE1BQU0sSUFBSStJLE1BQU07SUFDbEI7SUFDQSxPQUFPRDtBQUNUO0lBTmdCRCIsInNvdXJjZXMiOlsiRDpcXHhpYW5nbXVcXEVkZ2UtRnVuY3Rpb25cXGN0b2FwcFxcc3JjXFxjb250ZXh0XFxiYWxhbmNlLWNvbnRleHQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlU3RhdGUsIHVzZUVmZmVjdCwgUmVhY3ROb2RlLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IENvbnRyYWN0VHJhZGUsIFNwb3RUcmFkZSwgSW52ZXN0bWVudCwgUmV3YXJkTG9nLCBVc2VyLCBJbnZlc3RtZW50VGllciwgU2VjdXJlVXNlciB9IGZyb20gJ0AvdHlwZXMnO1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJy4vYXV0aC1jb250ZXh0JztcbmltcG9ydCB7IHVzZUVuaGFuY2VkTWFya2V0RGF0YSB9IGZyb20gJy4vZW5oYW5jZWQtbWFya2V0LWRhdGEtY29udGV4dCc7XG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gJ0AvaG9va3MvdXNlLXRvYXN0JztcbmltcG9ydCB7IHVzZUxvZ3MgfSBmcm9tICcuL2xvZ3MtY29udGV4dCc7XG5pbXBvcnQgeyBzdXBhYmFzZSwgaXNTdXBhYmFzZUVuYWJsZWQgfSBmcm9tICdAL2xpYi9zdXBhYmFzZUNsaWVudCc7XG5cbmV4cG9ydCB0eXBlIERhaWx5SW52ZXN0bWVudFBhcmFtcyA9IHtcbiAgICBwcm9kdWN0TmFtZTogc3RyaW5nO1xuICAgIGFtb3VudDogbnVtYmVyO1xuICAgIGRhaWx5UmF0ZTogbnVtYmVyO1xuICAgIHBlcmlvZDogbnVtYmVyO1xuICAgIGNhdGVnb3J5OiAnc3Rha2luZycgfCAnZmluYW5jZSc7XG4gICAgc3Rha2luZ0Fzc2V0Pzogc3RyaW5nO1xuICAgIHN0YWtpbmdBbW91bnQ/OiBudW1iZXI7XG59XG5cbmV4cG9ydCB0eXBlIEhvdXJseUludmVzdG1lbnRQYXJhbXMgPSB7XG4gICAgcHJvZHVjdE5hbWU6IHN0cmluZztcbiAgICBhbW91bnQ6IG51bWJlcjtcbiAgICBkdXJhdGlvbkhvdXJzOiBudW1iZXI7XG4gICAgdGllcnM6IEludmVzdG1lbnRUaWVyW107XG4gICAgY2F0ZWdvcnk6ICdzdGFraW5nJyB8ICdmaW5hbmNlJztcbn1cblxuaW50ZXJmYWNlIEJhbGFuY2VDb250ZXh0VHlwZSB7XG4gIGJhbGFuY2VzOiB7IFtrZXk6IHN0cmluZ106IHsgYXZhaWxhYmxlOiBudW1iZXI7IGZyb3plbjogbnVtYmVyIH0gfTtcbiAgaW52ZXN0bWVudHM6IEludmVzdG1lbnRbXTtcbiAgcmV3YXJkTG9nczogUmV3YXJkTG9nW107XG4gIGFkZERhaWx5SW52ZXN0bWVudDogKHBhcmFtczogRGFpbHlJbnZlc3RtZW50UGFyYW1zKSA9PiBQcm9taXNlPGJvb2xlYW4+O1xuICBhZGRIb3VybHlJbnZlc3RtZW50OiAocGFyYW1zOiBIb3VybHlJbnZlc3RtZW50UGFyYW1zKSA9PiBQcm9taXNlPGJvb2xlYW4+O1xuICBwbGFjZUNvbnRyYWN0VHJhZGU6ICh0cmFkZTogUGljazxDb250cmFjdFRyYWRlLCAndHlwZScgfCAnYW1vdW50JyB8ICdwZXJpb2QnIHwgJ3Byb2ZpdF9yYXRlJz4sIHRyYWRpbmdQYWlyOiBzdHJpbmcpID0+IHZvaWQ7XG4gIHBsYWNlU3BvdFRyYWRlOiAodHJhZGU6IFBpY2s8U3BvdFRyYWRlLCAndHlwZScgfCAnYW1vdW50JyB8ICd0b3RhbCcgfCAndHJhZGluZ19wYWlyJz4pID0+IHZvaWQ7XG4gIGlzTG9hZGluZzogYm9vbGVhbjtcbiAgYWN0aXZlQ29udHJhY3RUcmFkZXM6IENvbnRyYWN0VHJhZGVbXTtcbiAgaGlzdG9yaWNhbFRyYWRlczogKFNwb3RUcmFkZSB8IENvbnRyYWN0VHJhZGUpW107XG4gIGhhbmRsZUNoZWNrSW46ICgpID0+IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuLCByZXdhcmQ6IG51bWJlciwgbWVzc2FnZT86IHN0cmluZyB9PjtcbiAgbGFzdENoZWNrSW5EYXRlPzogc3RyaW5nO1xuICBjb25zZWN1dGl2ZUNoZWNrSW5zOiBudW1iZXI7XG4gIGNyZWRpdFJld2FyZDogKHBhcmFtczogeyB1c2VySWQ6IHN0cmluZzsgYW1vdW50OiBudW1iZXI7IGFzc2V0OiBzdHJpbmc7IHR5cGU6IFJld2FyZExvZ1sndHlwZSddOyBzb3VyY2VJZDogc3RyaW5nOyBkZXNjcmlwdGlvbjogc3RyaW5nOyB9KSA9PiBQcm9taXNlPHZvaWQ+O1xuICBhZGp1c3RCYWxhbmNlOiAodXNlcklkOiBzdHJpbmcsIGFzc2V0OiBzdHJpbmcsIGFtb3VudDogbnVtYmVyLCBpc0Zyb3plbj86IGJvb2xlYW4sIGlzRGViaXRGcm96ZW4/OiBib29sZWFuKSA9PiBQcm9taXNlPHZvaWQ+O1xufVxuXG5jb25zdCBCYWxhbmNlQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8QmFsYW5jZUNvbnRleHRUeXBlIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuXG5leHBvcnQgZnVuY3Rpb24gQmFsYW5jZVByb3ZpZGVyKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3ROb2RlIH0pIHtcbiAgY29uc3QgeyB1c2VyLCB1cGRhdGVVc2VyIH0gPSB1c2VBdXRoKCk7XG4gIGNvbnN0IHsgZ2V0TGF0ZXN0UHJpY2UgfSA9IHVzZUVuaGFuY2VkTWFya2V0RGF0YSgpO1xuICBjb25zdCB7IHRvYXN0IH0gPSB1c2VUb2FzdCgpO1xuICBjb25zdCB7IGFkZExvZyB9ID0gdXNlTG9ncygpO1xuICBcbiAgY29uc3QgW2JhbGFuY2VzLCBzZXRCYWxhbmNlc10gPSB1c2VTdGF0ZTx7IFtrZXk6IHN0cmluZ106IHsgYXZhaWxhYmxlOiBudW1iZXI7IGZyb3plbjogbnVtYmVyIH0gfT4oe30pO1xuICBjb25zdCBbaW52ZXN0bWVudHMsIHNldEludmVzdG1lbnRzXSA9IHVzZVN0YXRlPEludmVzdG1lbnRbXT4oW10pO1xuICBjb25zdCBbcmV3YXJkTG9ncywgc2V0UmV3YXJkTG9nc10gPSB1c2VTdGF0ZTxSZXdhcmRMb2dbXT4oW10pO1xuICBjb25zdCBbYWN0aXZlQ29udHJhY3RUcmFkZXMsIHNldEFjdGl2ZUNvbnRyYWN0VHJhZGVzXSA9IHVzZVN0YXRlPENvbnRyYWN0VHJhZGVbXT4oW10pO1xuICBjb25zdCBbaGlzdG9yaWNhbFRyYWRlcywgc2V0SGlzdG9yaWNhbFRyYWRlc10gPSB1c2VTdGF0ZTwoU3BvdFRyYWRlIHwgQ29udHJhY3RUcmFkZSlbXT4oW10pO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIFxuICBjb25zdCBbbGFzdENoZWNrSW5EYXRlLCBzZXRMYXN0Q2hlY2tJbkRhdGVdID0gdXNlU3RhdGU8c3RyaW5nIHwgdW5kZWZpbmVkPigpO1xuICBjb25zdCBbY29uc2VjdXRpdmVDaGVja0lucywgc2V0Q29uc2VjdXRpdmVDaGVja0luc10gPSB1c2VTdGF0ZSgwKTtcblxuICBjb25zdCBmZXRjaFVzZXJCYWxhbmNlRGF0YSA9IHVzZUNhbGxiYWNrKGFzeW5jICh1c2VySWQ6IHN0cmluZykgPT4ge1xuICAgICAgaWYgKCFpc1N1cGFiYXNlRW5hYmxlZCkgcmV0dXJuO1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgnYmFsYW5jZXMnKS5zZWxlY3QoJyonKS5lcSgndXNlcl9pZCcsIHVzZXJJZCk7XG4gICAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBiYWxhbmNlczpcIiwgZXJyb3IpO1xuICAgICAgZWxzZSB7XG4gICAgICAgICAgY29uc3QgZm9ybWF0dGVkQmFsYW5jZXM6IHsgW2tleTogc3RyaW5nXTogeyBhdmFpbGFibGU6IG51bWJlcjsgZnJvemVuOiBudW1iZXIgfSB9ID0ge307XG4gICAgICAgICAgZGF0YT8uZm9yRWFjaChiID0+IHtcbiAgICAgICAgICAgICAgZm9ybWF0dGVkQmFsYW5jZXNbYi5hc3NldF0gPSB7IGF2YWlsYWJsZTogYi5hdmFpbGFibGVfYmFsYW5jZSwgZnJvemVuOiBiLmZyb3plbl9iYWxhbmNlIH07XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0QmFsYW5jZXMoZm9ybWF0dGVkQmFsYW5jZXMpO1xuICAgICAgfVxuICB9LCBbXSk7XG4gIFxuICBjb25zdCBmZXRjaFVzZXJUcmFkZURhdGEgPSB1c2VDYWxsYmFjayhhc3luYyAodXNlcklkOiBzdHJpbmcpID0+IHtcbiAgICAgIGlmICghaXNTdXBhYmFzZUVuYWJsZWQpIHJldHVybjtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oJ3RyYWRlcycpLnNlbGVjdCgnKicpLmVxKCd1c2VyX2lkJywgdXNlcklkKS5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcbiAgICAgIGlmIChlcnJvcikgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHRyYWRlczpcIiwgZXJyb3IpO1xuICAgICAgZWxzZSB7XG4gICAgICAgICAgc2V0QWN0aXZlQ29udHJhY3RUcmFkZXMoZGF0YS5maWx0ZXIodCA9PiB0Lm9yZGVyVHlwZSA9PT0gJ2NvbnRyYWN0JyAmJiB0LnN0YXR1cyA9PT0gJ2FjdGl2ZScpIGFzIENvbnRyYWN0VHJhZGVbXSk7XG4gICAgICAgICAgc2V0SGlzdG9yaWNhbFRyYWRlcyhkYXRhLmZpbHRlcih0ID0+IHQuc3RhdHVzICE9PSAnYWN0aXZlJykgYXMgKFNwb3RUcmFkZSB8IENvbnRyYWN0VHJhZGUpW10pO1xuICAgICAgfVxuICB9LCBbXSk7XG5cbiAgY29uc3QgZmV0Y2hVc2VySW52ZXN0bWVudERhdGEgPSB1c2VDYWxsYmFjayhhc3luYyAodXNlcklkOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIWlzU3VwYWJhc2VFbmFibGVkKSByZXR1cm47XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgnaW52ZXN0bWVudHMnKS5zZWxlY3QoJyonKS5lcSgndXNlcl9pZCcsIHVzZXJJZCkub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG4gICAgaWYgKGVycm9yKSBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgaW52ZXN0bWVudHM6XCIsIGVycm9yKTtcbiAgICBlbHNlIHNldEludmVzdG1lbnRzKGRhdGEgYXMgSW52ZXN0bWVudFtdKTtcbiAgfSwgW10pO1xuICBcbiAgY29uc3QgZmV0Y2hVc2VyUmV3YXJkTG9ncyA9IHVzZUNhbGxiYWNrKGFzeW5jICh1c2VySWQ6IHN0cmluZykgPT4ge1xuICAgICAgaWYgKCFpc1N1cGFiYXNlRW5hYmxlZCkgcmV0dXJuO1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgncmV3YXJkX2xvZ3MnKS5zZWxlY3QoJyonKS5lcSgndXNlcl9pZCcsIHVzZXJJZCkub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG4gICAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyByZXdhcmQgbG9nczpcIiwgZXJyb3IpO1xuICAgICAgZWxzZSBzZXRSZXdhcmRMb2dzKGRhdGEgYXMgUmV3YXJkTG9nW10pO1xuICB9LCBbXSk7XG5cbiAgIGNvbnN0IGZldGNoVXNlclByb2ZpbGVGb3JDaGVja2luID0gdXNlQ2FsbGJhY2soYXN5bmMgKHVzZXJJZDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmICghaXNTdXBhYmFzZUVuYWJsZWQpIHJldHVybjtcbiAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgncHJvZmlsZXMnKS5zZWxlY3QoJ2xhc3RfY2hlY2tfaW5fZGF0ZSwgY29uc2VjdXRpdmVfY2hlY2tfaW5zJykuZXEoJ2lkJywgdXNlcklkKS5zaW5nbGUoKTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgdXNlciBwcm9maWxlIGZvciBjaGVjay1pbjpcIiwgZXJyb3IpO1xuICAgICAgICB9IGVsc2UgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgIHNldExhc3RDaGVja0luRGF0ZShkYXRhLmxhc3RfY2hlY2tfaW5fZGF0ZSk7XG4gICAgICAgICAgICBzZXRDb25zZWN1dGl2ZUNoZWNrSW5zKGRhdGEuY29uc2VjdXRpdmVfY2hlY2tfaW5zIHx8IDApO1xuICAgICAgICB9XG4gICAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgbG9hZEFsbERhdGEgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcbiAgICAgICAgaWYgKHVzZXI/LmlkICYmIGlzU3VwYWJhc2VFbmFibGVkKSB7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgZmV0Y2hVc2VyQmFsYW5jZURhdGEodXNlci5pZCksXG4gICAgICAgICAgICAgICAgZmV0Y2hVc2VyVHJhZGVEYXRhKHVzZXIuaWQpLFxuICAgICAgICAgICAgICAgIGZldGNoVXNlckludmVzdG1lbnREYXRhKHVzZXIuaWQpLFxuICAgICAgICAgICAgICAgIGZldGNoVXNlclJld2FyZExvZ3ModXNlci5pZCksXG4gICAgICAgICAgICAgICAgZmV0Y2hVc2VyUHJvZmlsZUZvckNoZWNraW4odXNlci5pZCksXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIENsZWFyIGRhdGEgb24gbG9nb3V0XG4gICAgICAgICAgICBzZXRCYWxhbmNlcyh7fSk7XG4gICAgICAgICAgICBzZXRJbnZlc3RtZW50cyhbXSk7XG4gICAgICAgICAgICBzZXRSZXdhcmRMb2dzKFtdKTtcbiAgICAgICAgICAgIHNldEFjdGl2ZUNvbnRyYWN0VHJhZGVzKFtdKTtcbiAgICAgICAgICAgIHNldEhpc3RvcmljYWxUcmFkZXMoW10pO1xuICAgICAgICAgICAgc2V0TGFzdENoZWNrSW5EYXRlKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBzZXRDb25zZWN1dGl2ZUNoZWNrSW5zKDApO1xuICAgICAgICB9XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICAgIGxvYWRBbGxEYXRhKCk7XG4gIH0sIFt1c2VyLCBpc1N1cGFiYXNlRW5hYmxlZCwgZmV0Y2hVc2VyQmFsYW5jZURhdGEsIGZldGNoVXNlclRyYWRlRGF0YSwgZmV0Y2hVc2VySW52ZXN0bWVudERhdGEsIGZldGNoVXNlclJld2FyZExvZ3MsIGZldGNoVXNlclByb2ZpbGVGb3JDaGVja2luXSk7XG4gIFxuICAvLyBSZWFsdGltZSBTdWJzY3JpcHRpb25zXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF1c2VyIHx8ICFpc1N1cGFiYXNlRW5hYmxlZCkgcmV0dXJuO1xuXG4gICAgY29uc3QgaGFuZGxlRGF0YUNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKCF1c2VyKSByZXR1cm47XG4gICAgICAgIGZldGNoVXNlclRyYWRlRGF0YSh1c2VyLmlkKTtcbiAgICAgICAgZmV0Y2hVc2VySW52ZXN0bWVudERhdGEodXNlci5pZCk7XG4gICAgICAgIGZldGNoVXNlckJhbGFuY2VEYXRhKHVzZXIuaWQpO1xuICAgICAgICBmZXRjaFVzZXJQcm9maWxlRm9yQ2hlY2tpbih1c2VyLmlkKTtcbiAgICB9XG5cbiAgICBjb25zdCB0cmFkZXNDaGFubmVsID0gc3VwYWJhc2VcbiAgICAgIC5jaGFubmVsKGB0cmFkZXMtY2hhbm5lbC0ke3VzZXIuaWR9YClcbiAgICAgIC5vbigncG9zdGdyZXNfY2hhbmdlcycsIHsgZXZlbnQ6ICcqJywgc2NoZW1hOiAncHVibGljJywgdGFibGU6ICd0cmFkZXMnLCBmaWx0ZXI6IGB1c2VyX2lkPWVxLiR7dXNlci5pZH1gIH0sIFxuICAgICAgICBoYW5kbGVEYXRhQ2hhbmdlXG4gICAgICApLnN1YnNjcmliZSgpO1xuICAgICAgXG4gICAgY29uc3QgaW52ZXN0bWVudHNDaGFubmVsID0gc3VwYWJhc2VcbiAgICAgIC5jaGFubmVsKGBpbnZlc3RtZW50cy1jaGFubmVsLSR7dXNlci5pZH1gKVxuICAgICAgLm9uKCdwb3N0Z3Jlc19jaGFuZ2VzJywgeyBldmVudDogJyonLCBzY2hlbWE6ICdwdWJsaWMnLCB0YWJsZTogJ2ludmVzdG1lbnRzJywgZmlsdGVyOiBgdXNlcl9pZD1lcS4ke3VzZXIuaWR9YCB9LCBcbiAgICAgICAgaGFuZGxlRGF0YUNoYW5nZVxuICAgICAgKS5zdWJzY3JpYmUoKTtcblxuICAgIGNvbnN0IGJhbGFuY2VzQ2hhbm5lbCA9IHN1cGFiYXNlXG4gICAgICAuY2hhbm5lbChgYmFsYW5jZXMtY2hhbm5lbC0ke3VzZXIuaWR9YClcbiAgICAgIC5vbigncG9zdGdyZXNfY2hhbmdlcycsIHsgZXZlbnQ6ICcqJywgc2NoZW1hOiAncHVibGljJywgdGFibGU6ICdiYWxhbmNlcycsIGZpbHRlcjogYHVzZXJfaWQ9ZXEuJHt1c2VyLmlkfWAgfSwgXG4gICAgICAgIGhhbmRsZURhdGFDaGFuZ2VcbiAgICAgICkuc3Vic2NyaWJlKCk7XG4gICAgXG4gICAgY29uc3QgcHJvZmlsZUNoYW5uZWwgPSBzdXBhYmFzZVxuICAgICAgLmNoYW5uZWwoYHByb2ZpbGUtY2hhbm5lbC0ke3VzZXIuaWR9YClcbiAgICAgIC5vbigncG9zdGdyZXNfY2hhbmdlcycsIHsgZXZlbnQ6ICdVUERBVEUnLCBzY2hlbWE6ICdwdWJsaWMnLCB0YWJsZTogJ3Byb2ZpbGVzJywgZmlsdGVyOiBgaWQ9ZXEuJHt1c2VyLmlkfWAgfSxcbiAgICAgICAgaGFuZGxlRGF0YUNoYW5nZVxuICAgICAgKS5zdWJzY3JpYmUoKTtcbiAgICAgIFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzdXBhYmFzZS5yZW1vdmVDaGFubmVsKHRyYWRlc0NoYW5uZWwpO1xuICAgICAgc3VwYWJhc2UucmVtb3ZlQ2hhbm5lbChpbnZlc3RtZW50c0NoYW5uZWwpO1xuICAgICAgc3VwYWJhc2UucmVtb3ZlQ2hhbm5lbChiYWxhbmNlc0NoYW5uZWwpO1xuICAgICAgc3VwYWJhc2UucmVtb3ZlQ2hhbm5lbChwcm9maWxlQ2hhbm5lbCk7XG4gICAgfTtcbiAgfSwgW3VzZXIsIGlzU3VwYWJhc2VFbmFibGVkLCBmZXRjaFVzZXJUcmFkZURhdGEsIGZldGNoVXNlckludmVzdG1lbnREYXRhLCBmZXRjaFVzZXJCYWxhbmNlRGF0YSwgZmV0Y2hVc2VyUHJvZmlsZUZvckNoZWNraW5dKTtcblxuICBjb25zdCBhZGp1c3RCYWxhbmNlID0gdXNlQ2FsbGJhY2soYXN5bmMgKHVzZXJJZDogc3RyaW5nLCBhc3NldDogc3RyaW5nLCBhbW91bnQ6IG51bWJlciwgaXNGcm96ZW46IGJvb2xlYW4gPSBmYWxzZSwgaXNEZWJpdEZyb3plbjogYm9vbGVhbiA9IGZhbHNlKSA9PiB7XG4gICAgaWYgKCFpc1N1cGFiYXNlRW5hYmxlZCkgcmV0dXJuO1xuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnJwYygnYWRqdXN0X2JhbGFuY2UnLCB7XG4gICAgICAgIHBfdXNlcl9pZDogdXNlcklkLFxuICAgICAgICBwX2Fzc2V0OiBhc3NldCxcbiAgICAgICAgcF9hbW91bnQ6IGFtb3VudCxcbiAgICAgICAgcF9pc19mcm96ZW46IGlzRnJvemVuLFxuICAgICAgICBwX2lzX2RlYml0X2Zyb3plbjogaXNEZWJpdEZyb3plbixcbiAgICB9KTtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFkanVzdGluZyBiYWxhbmNlOlwiLCBlcnJvcik7XG4gICAgICAgIGlmICh1c2VyPy5pZCA9PT0gdXNlcklkKSB7XG4gICAgICAgICAgICB0b2FzdCh7IHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScsIHRpdGxlOiAnQmFsYW5jZSBVcGRhdGUgRmFpbGVkJywgZGVzY3JpcHRpb246IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodXNlcj8uaWQgPT09IHVzZXJJZCkge1xuICAgICAgICAgICAgZmV0Y2hVc2VyQmFsYW5jZURhdGEodXNlcklkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgfSwgW3RvYXN0LCB1c2VyPy5pZCwgZmV0Y2hVc2VyQmFsYW5jZURhdGFdKTtcblxuICBjb25zdCBjcmVkaXRSZXdhcmQgPSB1c2VDYWxsYmFjayhhc3luYyAocGFyYW1zOiB7IHVzZXJJZDogc3RyaW5nOyBhbW91bnQ6IG51bWJlcjsgYXNzZXQ6IHN0cmluZzsgdHlwZTogUmV3YXJkTG9nWyd0eXBlJ107IHNvdXJjZUlkOiBzdHJpbmc7IGRlc2NyaXB0aW9uOiBzdHJpbmc7IH0pID0+IHtcbiAgICBpZiAoIWlzU3VwYWJhc2VFbmFibGVkKSByZXR1cm47XG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKCdjcmVkaXRfcmV3YXJkJywge1xuICAgICAgICBwX3VzZXJfaWQ6IHBhcmFtcy51c2VySWQsXG4gICAgICAgIHBfYW1vdW50OiBwYXJhbXMuYW1vdW50LFxuICAgICAgICBwX2Fzc2V0OiBwYXJhbXMuYXNzZXQsXG4gICAgICAgIHBfcmV3YXJkX3R5cGU6IHBhcmFtcy50eXBlLFxuICAgICAgICBwX3NvdXJjZV9pZDogcGFyYW1zLnNvdXJjZUlkLFxuICAgICAgICBwX2Rlc2NyaXB0aW9uOiBwYXJhbXMuZGVzY3JpcHRpb25cbiAgICB9KTtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNyZWRpdGluZyByZXdhcmQ6XCIsIGVycm9yKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCBwbGFjZUNvbnRyYWN0VHJhZGUgPSB1c2VDYWxsYmFjayhhc3luYyAodHJhZGU6IFBpY2s8Q29udHJhY3RUcmFkZSwgJ3R5cGUnIHwgJ2Ftb3VudCcgfCAncGVyaW9kJyB8ICdwcm9maXRfcmF0ZSc+LCB0cmFkaW5nUGFpcjogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCF1c2VyIHx8ICFpc1N1cGFiYXNlRW5hYmxlZCkgcmV0dXJuO1xuXG4gICAgaWYgKHVzZXIuaXNfZnJvemVuKSB7XG4gICAgICAgIHRvYXN0KHsgdmFyaWFudDogJ2Rlc3RydWN0aXZlJywgdGl0bGU6ICdBY3Rpb24gRmFpbGVkJywgZGVzY3JpcHRpb246ICdZb3VyIGFjY291bnQgaXMgZnJvemVuLid9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBxdW90ZUFzc2V0ID0gdHJhZGluZ1BhaXIuc3BsaXQoJy8nKVsxXTtcbiAgICBjb25zdCBjdXJyZW50UHJpY2UgPSBnZXRMYXRlc3RQcmljZSh0cmFkaW5nUGFpcik7XG5cbiAgICAgaWYgKChiYWxhbmNlc1txdW90ZUFzc2V0XT8uYXZhaWxhYmxlIHx8IDApIDwgdHJhZGUuYW1vdW50KSB7XG4gICAgICAgIHRvYXN0KHsgdmFyaWFudDogJ2Rlc3RydWN0aXZlJywgdGl0bGU6ICfkuIvljZXlpLHotKUnLCBkZXNjcmlwdGlvbjogYOWPr+eUqCAke3F1b3RlQXNzZXR9IOS9memineS4jei2s+OAgmAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgbmV3VHJhZGU6IE9taXQ8Q29udHJhY3RUcmFkZSwgJ2lkJyB8ICdjcmVhdGVkX2F0Jz4gPSB7XG4gICAgICB1c2VyX2lkOiB1c2VyLmlkLFxuICAgICAgdHJhZGluZ19wYWlyOiB0cmFkaW5nUGFpcixcbiAgICAgIHR5cGU6IHRyYWRlLnR5cGUsXG4gICAgICBhbW91bnQ6IHRyYWRlLmFtb3VudCxcbiAgICAgIGVudHJ5X3ByaWNlOiBjdXJyZW50UHJpY2UsXG4gICAgICBzZXR0bGVtZW50X3RpbWU6IG5ldyBEYXRlKERhdGUubm93KCkgKyAodHJhZGUucGVyaW9kICogMTAwMCkpLnRvSVNPU3RyaW5nKCksXG4gICAgICBwZXJpb2Q6IHRyYWRlLnBlcmlvZCxcbiAgICAgIHByb2ZpdF9yYXRlOiB0cmFkZS5wcm9maXRfcmF0ZSxcbiAgICAgIHN0YXR1czogJ2FjdGl2ZScsXG4gICAgICBvcmRlclR5cGU6ICdjb250cmFjdCcsXG4gICAgfVxuXG4gICAgY29uc3QgeyBkYXRhOiBpbnNlcnRlZFRyYWRlLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgndHJhZGVzJykuaW5zZXJ0KG5ld1RyYWRlKS5zZWxlY3QoKS5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvciB8fCAhaW5zZXJ0ZWRUcmFkZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBwbGFjZSBjb250cmFjdCB0cmFkZTpcIiwgZXJyb3IpO1xuICAgICAgdG9hc3QoeyB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLCB0aXRsZTogJ+S4i+WNleWksei0pScsIGRlc2NyaXB0aW9uOiAn5peg5rOV5L+d5a2Y5Lqk5piT6K6w5b2V77yM6K+36YeN6K+V44CCJyB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgdG9hc3QoeyB0aXRsZTogJ+S4i+WNleaIkOWKnycsIGRlc2NyaXB0aW9uOiAn5oKo55qE5ZCI57qm6K6i5Y2V5bey5oiQ5Yqf5bu656uL44CCJyB9KTtcblxuICB9LCBbdXNlciwgYmFsYW5jZXMsIGdldExhdGVzdFByaWNlLCB0b2FzdF0pO1xuICBcbiAgXG4gIGNvbnN0IHBsYWNlU3BvdFRyYWRlID0gdXNlQ2FsbGJhY2soYXN5bmMgKHRyYWRlOiBQaWNrPFNwb3RUcmFkZSwgJ3R5cGUnIHwgJ2Ftb3VudCcgfCAndG90YWwnIHwgJ3RyYWRpbmdfcGFpcic+KSA9PiB7XG4gICAgIGlmICghdXNlciB8fCAhaXNTdXBhYmFzZUVuYWJsZWQpIHJldHVybjtcbiAgICBcbiAgICAgaWYgKHVzZXIuaXNfZnJvemVuKSB7XG4gICAgICAgIHRvYXN0KHsgdmFyaWFudDogJ2Rlc3RydWN0aXZlJywgdGl0bGU6ICdBY3Rpb24gRmFpbGVkJywgZGVzY3JpcHRpb246ICdZb3VyIGFjY291bnQgaXMgZnJvemVuLid9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IFtiYXNlQXNzZXQsIHF1b3RlQXNzZXRdID0gdHJhZGUudHJhZGluZ19wYWlyLnNwbGl0KCcvJyk7XG4gICAgXG4gICAgaWYgKHRyYWRlLnR5cGUgPT09ICdidXknICYmIChiYWxhbmNlc1txdW90ZUFzc2V0XT8uYXZhaWxhYmxlIHx8IDApIDwgdHJhZGUudG90YWwpIHtcbiAgICAgICAgdG9hc3QoeyB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLCB0aXRsZTogJ+S4i+WNleWksei0pScsIGRlc2NyaXB0aW9uOiBg5Y+v55SoICR7cXVvdGVBc3NldH0g5L2Z6aKd5LiN6Laz44CCYCB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAgaWYgKHRyYWRlLnR5cGUgPT09ICdzZWxsJyAmJiAoYmFsYW5jZXNbYmFzZUFzc2V0XT8uYXZhaWxhYmxlIHx8IDApIDwgdHJhZGUuYW1vdW50KSB7XG4gICAgICAgIHRvYXN0KHsgdmFyaWFudDogJ2Rlc3RydWN0aXZlJywgdGl0bGU6ICfkuIvljZXlpLHotKUnLCBkZXNjcmlwdGlvbjogYOWPr+eUqCAke2Jhc2VBc3NldH0g5L2Z6aKd5LiN6Laz44CCYCB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRQcmljZSA9IGdldExhdGVzdFByaWNlKHRyYWRlLnRyYWRpbmdfcGFpcik7XG4gICAgY29uc3QgbmV3VHJhZGU6IE9taXQ8U3BvdFRyYWRlLCAnaWQnfCdjcmVhdGVkX2F0Jz4gPSB7XG4gICAgICAgIHR5cGU6IHRyYWRlLnR5cGUsXG4gICAgICAgIGFtb3VudDogdHJhZGUuYW1vdW50LFxuICAgICAgICB0b3RhbDogdHJhZGUudG90YWwsXG4gICAgICAgIHByaWNlOiBjdXJyZW50UHJpY2UsXG4gICAgICAgIHVzZXJfaWQ6IHVzZXIuaWQsXG4gICAgICAgIHRyYWRpbmdfcGFpcjogdHJhZGUudHJhZGluZ19wYWlyLFxuICAgICAgICBiYXNlX2Fzc2V0OiBiYXNlQXNzZXQsXG4gICAgICAgIHF1b3RlX2Fzc2V0OiBxdW90ZUFzc2V0LFxuICAgICAgICBzdGF0dXM6ICdmaWxsZWQnLFxuICAgICAgICBvcmRlclR5cGU6ICdzcG90J1xuICAgIH1cblxuICAgIGNvbnN0IHsgZGF0YTogaW5zZXJ0ZWRUcmFkZSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oJ3RyYWRlcycpLmluc2VydChuZXdUcmFkZSkuc2VsZWN0KCkuc2luZ2xlKCk7XG4gICAgaWYgKGVycm9yIHx8ICFpbnNlcnRlZFRyYWRlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHBsYWNlIHNwb3QgdHJhZGU6XCIsIGVycm9yKTtcbiAgICAgIHRvYXN0KHsgdmFyaWFudDogJ2Rlc3RydWN0aXZlJywgdGl0bGU6ICfkuIvljZXlpLHotKUnLCBkZXNjcmlwdGlvbjogJ+aXoOazleS/neWtmOS6pOaYk+iusOW9le+8jOivt+iBlOezu+WuouacjeOAgicgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgICBcbiAgICAgdG9hc3QoeyB0aXRsZTogJ+S6pOaYk+aIkOWKnycsIGRlc2NyaXB0aW9uOiAn5oKo55qE5biB5biB5Lqk5piT5bey5a6M5oiQ44CCJyB9KTtcbiAgfSwgW3VzZXIsIGJhbGFuY2VzLCBnZXRMYXRlc3RQcmljZSwgdG9hc3RdKTtcblxuICAgIGNvbnN0IGFkZERhaWx5SW52ZXN0bWVudCA9IGFzeW5jIChwYXJhbXM6IERhaWx5SW52ZXN0bWVudFBhcmFtcykgPT4ge1xuICAgICAgICBpZiAoIXVzZXIgfHwgIWlzU3VwYWJhc2VFbmFibGVkKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5ycGMoJ2NyZWF0ZV9kYWlseV9pbnZlc3RtZW50Jywge1xuICAgICAgICAgICAgcF91c2VyX2lkOiB1c2VyLmlkLFxuICAgICAgICAgICAgcF9wcm9kdWN0X25hbWU6IHBhcmFtcy5wcm9kdWN0TmFtZSxcbiAgICAgICAgICAgIHBfYW1vdW50OiBwYXJhbXMuYW1vdW50LFxuICAgICAgICAgICAgcF9kYWlseV9yYXRlOiBwYXJhbXMuZGFpbHlSYXRlLFxuICAgICAgICAgICAgcF9wZXJpb2Q6IHBhcmFtcy5wZXJpb2QsXG4gICAgICAgICAgICBwX2NhdGVnb3J5OiAnc3Rha2luZycsXG4gICAgICAgICAgICBwX3N0YWtpbmdfYXNzZXQ6IHBhcmFtcy5zdGFraW5nQXNzZXQsXG4gICAgICAgICAgICBwX3N0YWtpbmdfYW1vdW50OiBwYXJhbXMuc3Rha2luZ0Ftb3VudFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gYWRkIGRhaWx5IGludmVzdG1lbnQ6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHRvYXN0KHsgdmFyaWFudDogJ2Rlc3RydWN0aXZlJywgdGl0bGU6ICfotK3kubDlpLHotKUnLCBkZXNjcmlwdGlvbjogZXJyb3IubWVzc2FnZSB9KTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIFxuICAgIGNvbnN0IGFkZEhvdXJseUludmVzdG1lbnQgPSBhc3luYyAocGFyYW1zOiBIb3VybHlJbnZlc3RtZW50UGFyYW1zKSA9PiB7XG4gICAgICAgIGlmICghdXNlciB8fCAhaXNTdXBhYmFzZUVuYWJsZWQpIHJldHVybiBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkVGllciA9IHBhcmFtcy50aWVycy5maW5kKHQgPT4gdC5ob3VycyA9PT0gcGFyYW1zLmR1cmF0aW9uSG91cnMpO1xuICAgICAgICBpZiAoIXNlbGVjdGVkVGllcikgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnJwYygnY3JlYXRlX2hvdXJseV9pbnZlc3RtZW50Jywge1xuICAgICAgICAgICAgcF91c2VyX2lkOiB1c2VyLmlkLFxuICAgICAgICAgICAgcF9wcm9kdWN0X25hbWU6IHBhcmFtcy5wcm9kdWN0TmFtZSxcbiAgICAgICAgICAgIHBfYW1vdW50OiBwYXJhbXMuYW1vdW50LFxuICAgICAgICAgICAgcF9kdXJhdGlvbl9ob3VyczogcGFyYW1zLmR1cmF0aW9uSG91cnMsXG4gICAgICAgICAgICBwX2hvdXJseV9yYXRlOiBzZWxlY3RlZFRpZXIucmF0ZVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gYWRkIGhvdXJseSBpbnZlc3RtZW50OlwiLCBlcnJvcik7XG4gICAgICAgICAgICB0b2FzdCh7IHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScsIHRpdGxlOiAn6LSt5Lmw5aSx6LSlJywgZGVzY3JpcHRpb246IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgXG4gIGNvbnN0IGhhbmRsZUNoZWNrSW4gPSBhc3luYyAoKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW4sIHJld2FyZDogbnVtYmVyLCBtZXNzYWdlPzogc3RyaW5nIH0+ID0+IHtcbiAgICAgIGlmICghdXNlciB8fCAhaXNTdXBhYmFzZUVuYWJsZWQpIHtcbiAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgcmV3YXJkOiAwLCBtZXNzYWdlOiBcIlVzZXIgbm90IGxvZ2dlZCBpbi5cIiB9O1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5ycGMoJ2hhbmRsZV91c2VyX2NoZWNrX2luJywgeyBwX3VzZXJfaWQ6IHVzZXIuaWQgfSk7XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCByZXdhcmQ6IDAsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZGF0YS5zdWNjZXNzLCByZXdhcmQ6IGRhdGEucmV3YXJkX2Ftb3VudCwgbWVzc2FnZTogZGF0YS5tZXNzYWdlIH07XG4gIH1cblxuICBjb25zdCB2YWx1ZTogQmFsYW5jZUNvbnRleHRUeXBlID0geyBcbiAgICAgIGJhbGFuY2VzLCBcbiAgICAgIHBsYWNlQ29udHJhY3RUcmFkZSwgXG4gICAgICBwbGFjZVNwb3RUcmFkZSwgXG4gICAgICBpc0xvYWRpbmcsXG4gICAgICBpbnZlc3RtZW50cyxcbiAgICAgIHJld2FyZExvZ3MsXG4gICAgICBhZGREYWlseUludmVzdG1lbnQsXG4gICAgICBhZGRIb3VybHlJbnZlc3RtZW50LFxuICAgICAgYWN0aXZlQ29udHJhY3RUcmFkZXMsXG4gICAgICBoaXN0b3JpY2FsVHJhZGVzLFxuICAgICAgaGFuZGxlQ2hlY2tJbixcbiAgICAgIGxhc3RDaGVja0luRGF0ZSxcbiAgICAgIGNvbnNlY3V0aXZlQ2hlY2tJbnMsXG4gICAgICBjcmVkaXRSZXdhcmQsXG4gICAgICBhZGp1c3RCYWxhbmNlLFxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8QmFsYW5jZUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3ZhbHVlfT5cbiAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgPC9CYWxhbmNlQ29udGV4dC5Qcm92aWRlcj5cbiAgICApXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VCYWxhbmNlKCkge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChCYWxhbmNlQ29udGV4dCk7XG4gIGlmIChjb250ZXh0ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZUJhbGFuY2UgbXVzdCBiZSB1c2VkIHdpdGhpbiBhbiBCYWxhbmNlUHJvdmlkZXInKTtcbiAgfVxuICByZXR1cm4gY29udGV4dDtcbn1cbiJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VDYWxsYmFjayIsInVzZUF1dGgiLCJ1c2VFbmhhbmNlZE1hcmtldERhdGEiLCJ1c2VUb2FzdCIsInVzZUxvZ3MiLCJzdXBhYmFzZSIsImlzU3VwYWJhc2VFbmFibGVkIiwiQmFsYW5jZUNvbnRleHQiLCJ1bmRlZmluZWQiLCJCYWxhbmNlUHJvdmlkZXIiLCJjaGlsZHJlbiIsInVzZXIiLCJ1cGRhdGVVc2VyIiwiZ2V0TGF0ZXN0UHJpY2UiLCJ0b2FzdCIsImFkZExvZyIsImJhbGFuY2VzIiwic2V0QmFsYW5jZXMiLCJpbnZlc3RtZW50cyIsInNldEludmVzdG1lbnRzIiwicmV3YXJkTG9ncyIsInNldFJld2FyZExvZ3MiLCJhY3RpdmVDb250cmFjdFRyYWRlcyIsInNldEFjdGl2ZUNvbnRyYWN0VHJhZGVzIiwiaGlzdG9yaWNhbFRyYWRlcyIsInNldEhpc3RvcmljYWxUcmFkZXMiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJsYXN0Q2hlY2tJbkRhdGUiLCJzZXRMYXN0Q2hlY2tJbkRhdGUiLCJjb25zZWN1dGl2ZUNoZWNrSW5zIiwic2V0Q29uc2VjdXRpdmVDaGVja0lucyIsImZldGNoVXNlckJhbGFuY2VEYXRhIiwidXNlcklkIiwiZGF0YSIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwiY29uc29sZSIsImZvcm1hdHRlZEJhbGFuY2VzIiwiZm9yRWFjaCIsImIiLCJhc3NldCIsImF2YWlsYWJsZSIsImF2YWlsYWJsZV9iYWxhbmNlIiwiZnJvemVuIiwiZnJvemVuX2JhbGFuY2UiLCJmZXRjaFVzZXJUcmFkZURhdGEiLCJvcmRlciIsImFzY2VuZGluZyIsImZpbHRlciIsInQiLCJvcmRlclR5cGUiLCJzdGF0dXMiLCJmZXRjaFVzZXJJbnZlc3RtZW50RGF0YSIsImZldGNoVXNlclJld2FyZExvZ3MiLCJmZXRjaFVzZXJQcm9maWxlRm9yQ2hlY2tpbiIsInNpbmdsZSIsImxhc3RfY2hlY2tfaW5fZGF0ZSIsImNvbnNlY3V0aXZlX2NoZWNrX2lucyIsImxvYWRBbGxEYXRhIiwiaWQiLCJQcm9taXNlIiwiYWxsIiwiaGFuZGxlRGF0YUNoYW5nZSIsInRyYWRlc0NoYW5uZWwiLCJjaGFubmVsIiwib24iLCJldmVudCIsInNjaGVtYSIsInRhYmxlIiwic3Vic2NyaWJlIiwiaW52ZXN0bWVudHNDaGFubmVsIiwiYmFsYW5jZXNDaGFubmVsIiwicHJvZmlsZUNoYW5uZWwiLCJyZW1vdmVDaGFubmVsIiwiYWRqdXN0QmFsYW5jZSIsImFtb3VudCIsImlzRnJvemVuIiwiaXNEZWJpdEZyb3plbiIsInJwYyIsInBfdXNlcl9pZCIsInBfYXNzZXQiLCJwX2Ftb3VudCIsInBfaXNfZnJvemVuIiwicF9pc19kZWJpdF9mcm96ZW4iLCJ2YXJpYW50IiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsIm1lc3NhZ2UiLCJjcmVkaXRSZXdhcmQiLCJwYXJhbXMiLCJwX3Jld2FyZF90eXBlIiwidHlwZSIsInBfc291cmNlX2lkIiwic291cmNlSWQiLCJwX2Rlc2NyaXB0aW9uIiwicGxhY2VDb250cmFjdFRyYWRlIiwidHJhZGUiLCJ0cmFkaW5nUGFpciIsImlzX2Zyb3plbiIsInF1b3RlQXNzZXQiLCJzcGxpdCIsImN1cnJlbnRQcmljZSIsIm5ld1RyYWRlIiwidXNlcl9pZCIsInRyYWRpbmdfcGFpciIsImVudHJ5X3ByaWNlIiwic2V0dGxlbWVudF90aW1lIiwiRGF0ZSIsIm5vdyIsInBlcmlvZCIsInRvSVNPU3RyaW5nIiwicHJvZml0X3JhdGUiLCJpbnNlcnRlZFRyYWRlIiwiaW5zZXJ0IiwicGxhY2VTcG90VHJhZGUiLCJiYXNlQXNzZXQiLCJ0b3RhbCIsInByaWNlIiwiYmFzZV9hc3NldCIsInF1b3RlX2Fzc2V0IiwiYWRkRGFpbHlJbnZlc3RtZW50IiwicF9wcm9kdWN0X25hbWUiLCJwcm9kdWN0TmFtZSIsInBfZGFpbHlfcmF0ZSIsImRhaWx5UmF0ZSIsInBfcGVyaW9kIiwicF9jYXRlZ29yeSIsInBfc3Rha2luZ19hc3NldCIsInN0YWtpbmdBc3NldCIsInBfc3Rha2luZ19hbW91bnQiLCJzdGFraW5nQW1vdW50IiwiYWRkSG91cmx5SW52ZXN0bWVudCIsInNlbGVjdGVkVGllciIsInRpZXJzIiwiZmluZCIsImhvdXJzIiwiZHVyYXRpb25Ib3VycyIsInBfZHVyYXRpb25faG91cnMiLCJwX2hvdXJseV9yYXRlIiwicmF0ZSIsImhhbmRsZUNoZWNrSW4iLCJzdWNjZXNzIiwicmV3YXJkIiwicmV3YXJkX2Ftb3VudCIsInZhbHVlIiwiUHJvdmlkZXIiLCJ1c2VCYWxhbmNlIiwiY29udGV4dCIsIkVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/context/balance-context.tsx\n"));

/***/ })

});